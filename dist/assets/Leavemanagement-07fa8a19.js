import{u as Y}from"./apistore-37bb1d33.js";import{u as z,Z as ue,H as r,_ as w,a8 as de,a9 as O,r as W,o as m,c as S,b as e,w as a,ae as C,$ as I,a0 as c,V as q,a2 as D,z as _,a1 as F,a4 as G,a as J,t as k,T as ie,al as ce,N as P,am as me,an as ve,af as fe,O as j,ad as pe,d,ao as K,I as $,ah as _e,g as L,y as he,J as Z,au as ge,q as Ve,l as ye,m as we,av as be,ag as ke,aa as xe,ab as Le,ac as Se,k as Ce,a5 as H,aj as De,p as Te,ak as Ie}from"./index-a90347ad.js";import{f as Ae}from"./index-c4405eea.js";const Ee=J("h2",null,"Leave Management",-1),ze=d(" Request a Leave "),$e={class:"text-h5"},Me=d(" Cancel "),Re=d(" Save "),qe=z({setup(M){const v=Y(),i=ue(),h=i.current.value.colors.primary,s=i.current.value.colors.success,o=i.current.value.colors.error;i.current.value.colors.warning;const x=r(-1),b=r(""),f=r(!1),n=r({show:!1,message:"",color:""}),y=r(null),p=r(!1),A=r(""),E=r(""),g=r({emp_id:"",leave_request_date:[""],leave_type:"",reason:""}),Q=r({emp_id:"",leave_request_date:[""],leave_type:"",reason:""}),T=[16,3],X=w(()=>({series:T,labels:["Totalleave","Remaining"],dataLabels:{enabled:!1},tooltip:{theme:"dark",fillSeriesColor:!1},colors:[h,"#d8d8d8"],legend:{show:!0,position:"bottom",fontSize:"14px",color:h,formatter:function(l,t){return`${l}: ${t.w.globals.series[t.seriesIndex]}`}},stroke:{show:!1},responsive:[{breakpoint:991,options:{chart:{width:150}}}],plotOptions:{pie:{donut:{size:"80%",background:"none",labels:{show:!0,total:{showAlways:!0,show:!0,label:"TOTAL",fontSize:"14px",fontWeight:"Bold",color:h,formatter:()=>T[1].toString()},name:{show:!0,fontSize:"12px",color:void 0,offsetY:5},value:{show:!0,color:h}}}}}})),U=[8,5],ee=w(()=>({series:T,labels:["Totalsick","Remaining"],dataLabels:{enabled:!1},tooltip:{theme:"dark",fillSeriesColor:!1},colors:[s,"#d8d8d8"],legend:{show:!0,position:"bottom",fontSize:"14px",color:s,formatter:function(l,t){return`${l}: ${t.w.globals.series[t.seriesIndex]}`}},stroke:{show:!1},responsive:[{breakpoint:991,options:{chart:{width:150}}}],plotOptions:{pie:{donut:{size:"80%",background:"none",labels:{show:!0,total:{showAlways:!0,show:!0,label:"SICK",fontSize:"14px",fontWeight:"Bold",color:s,formatter:()=>U[1].toString()},name:{show:!0,fontSize:"12px",color:void 0,offsetY:5},value:{show:!0,color:s}}}}}})),B=[8,5],ae=w(()=>({series:T,labels:["Totalcasual","Remaining"],dataLabels:{enabled:!1},tooltip:{theme:"dark",fillSeriesColor:!1},colors:[o,"#d8d8d8"],legend:{show:!0,position:"bottom",fontSize:"14px",color:o,formatter:function(l,t){return`${l}: ${t.w.globals.series[t.seriesIndex]}`}},stroke:{show:!1},responsive:[{breakpoint:991,options:{chart:{width:150}}}],plotOptions:{pie:{donut:{size:"80%",background:"none",labels:{show:!0,total:{showAlways:!0,show:!0,label:"CASUAL",fontSize:"14px",fontWeight:"Bold",color:o,formatter:()=>B[1].toString()},name:{show:!0,fontSize:"12px",color:void 0,offsetY:5},value:{show:!0,color:o}}}}}})),N=w(()=>[l=>!!l||"Date is required"]),te=w(()=>[l=>!!l||"Leave Type is required"]),le=w(()=>[l=>!!l||"Leave Reason is required"]);de(()=>{b.value=localStorage.getItem("HRMSuserID")||""});const oe=w(()=>x.value===-1?"Request Leave":"Edit a Leave"),se=()=>{f.value=!0},R=()=>{f.value=!1,_e(()=>{g.value={...Q.value},A.value="",E.value="",x.value=-1})};O(f,l=>{l||R()}),O([A,E],([l,t])=>{l&&t&&(g.value.leave_request_date=[l,t])});const re=async()=>{y.value&&((await y.value.validate()).valid===!0?ne():n.value={show:!0,message:"Please fill out all mandatory fields",color:"error"})},ne=()=>{const l={Sick:"sick",Casual:"casual"},t={emp_id:b.value,leave_type:l[g.value.leave_type],leave_request_date:g.value.leave_request_date,reason:g.value.reason};v.SaveLeavedata(t).then(V=>{V.data.status==1?(n.value={show:!0,message:V.data.message,color:"primary"},R(),v.getLeavesdata(b.value)):n.value={show:!0,message:V.data.message,color:"error"}}).catch(V=>console.log("errors",V))};return(l,t)=>{const V=W("apexchart");return m(),S($,null,[e(D,{elevation:"1",class:"p-0 m-0"},{default:a(()=>[e(C,{class:"py-2 pa-2 ma-2"},{default:a(()=>[e(I,null,{default:a(()=>[e(c,{cols:"6",sm:"6",lg:"6",class:"d-flex flex-column align-center"},{default:a(()=>[Ee]),_:1}),e(c,{cols:"6",sm:"6",lg:"6",class:"text-right"},{default:a(()=>[e(q,{color:"error",size:"small",dark:"",variant:"flat","append-icon":"mdi-account-circle",onClick:t[0]||(t[0]=u=>se())},{default:a(()=>[ze]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{elevation:"1",class:"mt-2"},{default:a(()=>[e(C,{class:"py-2 pa-2 ma-2"},{default:a(()=>[e(I,null,{default:a(()=>[e(c,{cols:"12",md:"4",sm:"12"},{default:a(()=>[e(V,{type:"donut",height:"200",options:_(X),series:T},null,8,["options"])]),_:1}),e(c,{cols:"12",md:"4",sm:"12"},{default:a(()=>[e(V,{type:"donut",height:"200",options:_(ee),series:U},null,8,["options"])]),_:1}),e(c,{cols:"12",md:"4",sm:"12"},{default:a(()=>[e(V,{type:"donut",height:"200",options:_(ae),series:B},null,8,["options"])]),_:1})]),_:1})]),_:1})]),_:1}),e(pe,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=u=>f.value=u),"max-width":"800",persistent:""},{default:a(()=>[e(D,{elevation:"10",class:"overflow-hidden"},{default:a(()=>[e(F,{class:"py-4 px-6"},{default:a(()=>[e(G,null,{default:a(()=>[J("span",$e,k(_(oe)),1)]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(ie,null,{default:a(()=>[e(ce,{ref_key:"empleaveform",ref:y,modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=u=>p.value=u)},{default:a(()=>[e(I,null,{default:a(()=>[e(c,{cols:"12",md:"4",sm:"12"},{default:a(()=>[e(P,{modelValue:A.value,"onUpdate:modelValue":t[1]||(t[1]=u=>A.value=u),label:"From Date",type:"date",rules:_(N)},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",md:"4",sm:"12"},{default:a(()=>[e(P,{modelValue:E.value,"onUpdate:modelValue":t[2]||(t[2]=u=>E.value=u),label:"To Date",type:"date",rules:_(N)},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",md:"4",sm:"12"},{default:a(()=>[e(me,{rules:_(te),modelValue:g.value.leave_type,"onUpdate:modelValue":t[3]||(t[3]=u=>g.value.leave_type=u),items:["Casual","Sick"],label:"Leave Type"},null,8,["rules","modelValue"])]),_:1}),e(c,{cols:"12",md:"12",sm:"12"},{default:a(()=>[e(ve,{modelValue:g.value.reason,"onUpdate:modelValue":t[4]||(t[4]=u=>g.value.reason=u),label:"Leave Reason",rules:_(le),"row-height":"30",rows:"3","no-resize":""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(fe,null,{default:a(()=>[e(j),e(q,{color:"blue-darken-1",variant:"text",onClick:R},{default:a(()=>[Me]),_:1}),e(q,{color:"blue-darken-1",variant:"text",onClick:re},{default:a(()=>[Re]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(K,{modelValue:n.value.show,"onUpdate:modelValue":t[7]||(t[7]=u=>n.value.show=u),color:n.value.color,top:"",timeout:1e3},{default:a(()=>[d(k(n.value.message),1)]),_:1},8,["modelValue","color"])],64)}}}),Pe=d(" Coming Public Holidays "),Ue=d(" No holidays available for this month. "),Be=z({setup(M){const v=r([{name:"New Year",date:"2024-01-01"},{name:"Republic Day",date:"2024-01-26"},{name:"Holi",date:"2024-03-25"},{name:"Independence Day",date:"2024-08-15"},{name:"Gandhi Jayanti",date:"2024-10-02"},{name:"Diwali",date:"2024-10-31"},{name:"Christmas",date:"2024-12-25"}]),i=o=>Ae(new Date(o),"MMMM d, yyyy"),h=new Date().getMonth(),s=w(()=>v.value.filter(o=>new Date(o.date).getMonth()===h));return(o,x)=>{const b=W("v-list-item-content");return m(),L(D,{elevation:"1"},{default:a(()=>[e(G,{class:"text-h6"},{default:a(()=>[Pe]),_:1}),e(C,null,{default:a(()=>[_(s).length>0?(m(),L(he,{key:0},{default:a(()=>[(m(!0),S($,null,Z(_(s),f=>(m(),L(Ve,{key:f.date},{default:a(()=>[e(b,null,{default:a(()=>[e(ye,null,{default:a(()=>[d(k(f.name),1)]),_:2},1024),e(we,null,{default:a(()=>[d(k(i(f.date)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(m(),L(ge,{key:1,type:"info",dismissible:""},{default:a(()=>[Ue]),_:1}))]),_:1})]),_:1})}}}),Ne=d(" mdi-pencil "),Oe=d(" mdi-delete "),He=z({setup(M){const v=Y(),i=r(null),h=[{title:"Employee Name",key:"emp_id"},{title:"Applied Date",key:"applied_date"},{title:"Leave Request Dates",key:"leave_request_dates"},{title:"Leave Status",key:"leave_status"},{title:"Reason",key:"reason"},{title:"action",key:"actions"}],s=r({show:!1,message:"",color:""}),o=r([""]),x=r("");be(()=>{x.value=localStorage.getItem("HRMSuserID")||"",v.getLeavesdata(x.value).then(n=>{n.status==1?(o.value=n.data.reverse(),s.value={show:!0,message:n.message,color:"primary"}):s.value={show:!0,message:n.message,color:"error"}}).catch(n=>console.log("errors",n))});const b=()=>{},f=()=>{};return(n,y)=>(m(),S($,null,[e(D,{elevation:"1",class:"mt-2"},{default:a(()=>[e(C,null,{default:a(()=>[e(ke,{headers:h,items:o.value,height:"400px","fixed-header":"","items-per-page":10,density:"compact",search:i.value},{top:a(()=>[e(xe,{prominent:"",dark:"",style:{"background-color":"rgb(255, 255, 255)"}},{default:a(()=>[e(Le,null,{text:a(()=>[e(P,{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=p=>i.value=p),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),_:1}),e(Se,{class:"mx-4",inset:"",vertical:""}),e(j)]),_:1})]),"item.leave_status":a(({item:p})=>[e(Ce,{color:p.leave_status=="Pending"?"error":"success"},{default:a(()=>[d(k(p.leave_status),1)]),_:2},1032,["color"])]),"item.actions":a(({item:p})=>[e(H,{class:"me-2 icon-hover",size:"small",color:"info",onClick:b},{default:a(()=>[Ne]),_:1}),e(H,{class:"icon-hover",size:"small",color:"error",onClick:f},{default:a(()=>[Oe]),_:1})]),_:1},8,["items","search"])]),_:1})]),_:1}),e(K,{modelValue:s.value.show,"onUpdate:modelValue":y[1]||(y[1]=p=>s.value.show=p),color:s.value.color,top:"",timeout:1e3},{default:a(()=>[d(k(s.value.message),1)]),_:1},8,["modelValue","color"])],64))}}),Ye={key:0},We={key:1},je=z({setup(M){const v=r("APPLY LEAVE"),i=r(["APPLY LEAVE","VIEW APPLIED LEAVES"]);return(h,s)=>(m(),L(D,{elevation:"10",class:"overflow-hidden"},{default:a(()=>[e(F,{class:"v-card-item bg-surface pt-4 pb-2"},{default:a(()=>[e(De,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=o=>v.value=o),"bg-color":"deep-purple-accent-4",color:"primary",density:"compact",grow:""},{default:a(()=>[(m(!0),S($,null,Z(i.value,o=>(m(),L(Ie,{key:o,value:o},{default:a(()=>[d(k(o),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(C,null,{default:a(()=>[v.value==="APPLY LEAVE"?(m(),S("div",Ye,[e(I,{class:"pa-0 ma-0"},{default:a(()=>[e(c,{cols:"12",lg:"8"},{default:a(()=>[e(qe)]),_:1}),e(c,{cols:"12",lg:"4"},{default:a(()=>[e(Be)]),_:1})]),_:1})])):v.value==="VIEW APPLIED LEAVES"?(m(),S("div",We,[e(I,{class:"pa-0 ma-0"},{default:a(()=>[e(c,{cols:"12",lg:"12"},{default:a(()=>[e(He)]),_:1})]),_:1})])):Te("",!0)]),_:1})]),_:1}))}});export{je as default};
